<%=
component_wrapper do
  flex_layout(data: wrapper_data_attributes) do |flex|
    flex.with_row do
      render(Primer::OpenProject::SubHeader.new) do |subheader|
        subheader.with_action_button(
          scheme: :primary,
          tag: :a,
          href: new_admin_time_entry_activity_path,
          test_selector: "add-activity-button"
        ) do |button|
          button.with_leading_visual_icon(icon: :plus)
          I18n.t(:button_add_activity)
        end
      end
    end

    flex.with_row do
      render(border_box_container(data: drop_target_config)) do |component|
        component.with_header(font_weight: :bold) { TimeEntryActivity.model_name.human(count: :other) }

        if time_entry_activities.empty?
          component.with_row do
            render(Primer::Beta::Text.new(color: :subtle)) { "No activities exist" }
          end
        else
          time_entry_activities.each do |activity|
            component.with_row(test_selector: "time-entry-activity-row-#{activity.id}", data: draggable_item_config(activity)) do
              render(Admin::TimeEntryActivities::ActivityComponent.new(activity: activity, max_activity_position: max_activity_position))
            end
          end
        end
      end
    end
  end
end
%>
