<%= render(Primer::Alpha::Dialog.new(title: t("caption_log_time_dialog"), size: :medium_portrait, id: MODAL_ID, data: { "keep-open-on-submit": true, "controller" => "time-entry", "time-entry-id" => time_entry.id, "ongoing" => time_entry.ongoing? })) do |d| %>
  <% d.with_header(variant: :large) %>
  <% d.with_body do %>
    <%= render(
          TimeEntries::TimeEntryFormComponent.new(
            time_entry: time_entry,
            show_user: show_user,
            show_work_package: show_work_package,
            limit_to_project_id: limit_to_project_id
          )
        ) %>
  <% end %>
  <% d.with_footer(variant: :large) do %>
    <%= grid_layout("time-entry-dialog-footer", tag: :div) do |grid| %>
      <% if can_delete_time_entry? %>
        <% grid.with_area("delete") do %>
          <%= render(
                Primer::Beta::Button.new(
                  scheme: :danger,
                  test_selector: "destroy-time-entry-button",
                  data: {
                    "turbo" => true,
                    "turbo-method" => :delete,
                    "turbo-confirm" => t("js.text_are_you_sure")
                  },
                  href: time_entry_path(time_entry),
                  tag: :a
                )
              ) { t("button_delete") } %>
        <% end %>
      <% end %>
      <% grid.with_area("cancel") do %>
        <%= render(
              Primer::Beta::Button.new(data: { "close-dialog-id": "time-entry-dialog" })
            ) { I18n.t("button_cancel") } %>
        <% end %>
        <% grid.with_area("confirm") do %>
        <%= render(
              Primer::Beta::Button.new(
                scheme: :primary,
                type: :submit,
                test_selector: "create-time-entry-button",
                form: "time-entry-form"
              )
            ) { t("button_log_time") } %>
      <% end %>
    <% end %>
  <% end %>
<% end %>
