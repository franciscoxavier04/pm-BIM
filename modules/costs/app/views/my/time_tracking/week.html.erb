<%=
  render Primer::OpenProject::PageHeader.new do |header|
    header.with_title(variant: :large) { I18n.t(:label_this_week) }
    header.with_breadcrumbs(
      [
        { text: I18n.t(:label_my_time_tracking), href: my_time_tracking_path },
        I18n.t(:label_this_week)
      ]
    )

    cal_button = lambda do |button|
      button.with_leading_visual_icon(icon: :calendar)
      button.with_trailing_action_icon(icon: :"triangle-down")
      "Calendar"
    end

    list_button = lambda do |button|
      button.with_leading_visual_icon(icon: "list-unordered")
      button.with_trailing_action_icon(icon: :"triangle-down")
      "List"
    end

    header.with_action_menu(menu_arguments: { anchor_align: :end }, button_arguments: { button_block: params[:view_mode] == "list" ? list_button : cal_button }) do |menu|
      menu.with_item(label: "Calendar", tag: :a, href: url_for(params.permit(:controller, :action, :date).merge(view_mode: "calendar"))) do |item|
        item.with_leading_visual_icon(icon: :calendar)
      end
      menu.with_item(label: "List", tag: :a, href: url_for(params.permit(:controller, :action, :date).merge(view_mode: "list"))) do |item|
        item.with_leading_visual_icon(icon: "list-unordered")
      end
    end

    header.with_action_zen_mode_button
  end
%>

<%= render(list_view_component) %>
