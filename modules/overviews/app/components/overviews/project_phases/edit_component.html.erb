<%= helpers.angular_component_tag "opce-custom-modal-overlay" %>
<%=
  component_wrapper do
    primer_form_with(
      id: "project-life-cycles-edit-form",
      model:,
      method: :put,
      data: {
        controller: "overview--project-life-cycles-form",
        "overview--project-life-cycles-form-url-value": preview_project_phase_path(model),
        "application-target": "dynamic",
        turbo: true,
        turbo_stream: true,
        "test-selector": "async-dialog-content"
      },
      html: { autocomplete: "off" }
    ) do |f|
      flex_layout do |flex|
        flex.with_row do
          render(Projects::LifeCycles::Form.new(f))
        end
        flex.with_row do
          helpers.angular_component_tag "opce-wp-date-picker-instance",
                                        inputs: {
                                          start_date: model.start_date,
                                          due_date: model.finish_date,
                                          ignore_non_working_days: false,
                                          schedule_manually: true,
                                          date_mode: "range",
                                          minDate: model.default_start_date,
                                          start_date_field_id: "project_phase_start_date",
                                          due_date_field_id: "project_phase_finish_date",
                                          duration_field_id: "project_phase_duration"
                                        }
        end
      end
    end
  end
%>
