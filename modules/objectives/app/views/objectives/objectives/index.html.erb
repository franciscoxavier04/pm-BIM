<%=
  render Primer::OpenProject::PageHeader.new do |header|
    header.with_title { "Ziele" }
    header.with_breadcrumbs(
      [
        ({ href: project_overview_path(@project.id), text: @project.name } if @project),
        "Ziele",
      ].compact
    )
  end
%>

<%=
  render(Primer::OpenProject::SubHeader.new) do |subheader|
    all_label =
      if @project.portfolio?
        "Aus Portfolio und Teilportfolio"
      elsif @project.program?
        "Aus Programm und Projekten"
      else
        "Aus Projekt und Unterprojekten"
      end

    current_label =
      if @project.portfolio?
        "Nur aus diesem Portfolio"
      elsif @project.program?
        "Nur dieses Programm"
      else
        "Nur dieses Project"
      end

    subheader.with_segmented_control("aria-label": I18n.t(:label_filter_plural)) do |control|
      control.with_item(
        tag: :a,
        icon: :"op-hierarchy",
        href: project_objectives_path(@project, project_filter: nil),
        label: all_label,
        title: all_label,
        selected: params[:project_filter] != "current"
      )
      control.with_item(
        tag: :a,
        icon: :goal,
        href:project_objectives_path(@project, project_filter: "current"),
        label: current_label,
        title: current_label,
        selected: params[:project_filter] == "current"
      )
    end

    # subheader.with_action_button(
    #   scheme: :primary,
    #   leading_icon: :plus,
    #   label: "Risiko",
    #   tag: :a,
    #   data: { turbo_stream: true },
    #   href: new_project_work_packages_dialog_path(@project, type_id: BmdsHackathon::References.risk_type.id)
    # ) do
    #   "Risiko"
    # end
  end
%>

<%=
  render(Objectives::WidgetComponent.new(project: @project, collapsed: false, show_footer: false, query: @query, mb: 2))
%>

<%=
  render(Objectives::ContainerComponent.new(project: @project, objectives: @objectives))
%>
