<%=
  component_wrapper do
    render(
      Primer::Alpha::Dialog.new(
        id: "manage-participants-dialog",
        size: :xlarge,
        title: I18n.t("meeting.participants.label.manage_participants"),
        data: { "keep-open-on-submit": true }
      )
    ) do |d|
      d.with_header(variant: :large)

      d.with_body(classes: "Overlay--size-xlarge-maximized-empty-footer") do
        flex_layout do |container|
          if @meeting.errors[:base].present?
            container.with_row(mb: 3) do
              render(Primer::Alpha::Banner.new(mb: 3, icon: :stop, scheme: :danger)) { @meeting.errors[:base].join("\n") }
            end
          end

          container.with_row(mb: 3) do
            render(Meetings::EmailUpdatesBannerComponent.new(@meeting, type: :participants))
          end

          container.with_row(mb: 3) do
            render(Primer::Beta::Text.new) { I18n.t("meeting.participants.text.manage_participants") }
          end

          container.with_row(mb: 3) do
            render(Meetings::Participants::AddUserFormComponent.new(meeting: @meeting))
          end

          container.with_row do
            render(Meetings::Participants::ListComponent.new(meeting: @meeting))
          end
        end
      end

      # Empty, but necessary for proper padding of body content
      d.with_footer
    end
  end
%>
