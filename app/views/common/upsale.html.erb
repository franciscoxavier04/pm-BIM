<% more_info = local_assigns[:feature_more_info] %>
<% feature_video = local_assigns[:feature_video] %>
<% feature_image = local_assigns[:feature_image] %>
<% additional_classes = local_assigns[:additional_classes] %>
<% write_augur_to_gon %>

<% if !EnterpriseToken.current.present? %>
  <% write_trial_key_to_gon %>
<% end %>

<div class="upsale-notification <%= additional_classes %>">
  <%= render(Primer::Beta::Heading.new(tag: :h2)) { feature_title } %>
    <% if feature_description.empty? %>
      <p class="upsale--feature-reference">
        <%= t("js.admin.enterprise.upsale.benefits.description") %>
        <br>
        <%= t("js.admin.enterprise.upsale.benefits.premium_features_text") %>
        <br>
        <%= t("js.admin.enterprise.upsale.benefits.professional_support_text") %>
      </p>
    <% else %>
      <%= render(Primer::Beta::Text.new) { feature_description } %>
    <% end %>

    <p class="upsale--feature-reference">
    <%= more_info %>
    </p>

    <% if feature_video.present? %>
      <%= video_tag feature_video, controls: false, class: "widget-box--teaser-video", autoplay: true, loop: true, muted: true %>
    <% elsif feature_image.present? %>
      <%= image_tag feature_image, class: "widget-box--teaser-image" %>
    <% else %>
      <%= image_tag "enterprise-add-on.svg", class: "widget-box--teaser-image_default" %>
    <% end %>

    <p> <%= feature_title %> <%= t("admin.enterprise.enterprise_info_html") %>
    <br>
    <%= t("admin.enterprise.upgrade_info") %>
    </p>

    <%=
      render(Primer::OpenProject::FlexLayout.new(align_items: :center, style: "justify-self: center")) do |flex|
        flex.with_column do
          render(Primer::Beta::Button.new(
            tag: :a,
            scheme: :secondary,
            href: OpenProject::Static::Links.links[:contact_us][:href],
            target: "_blank",
            title: t("admin.enterprise.buttons.contact"),
            aria_label: t("admin.enterprise.buttons.contact"),
            )) { t("admin.enterprise.buttons.contact") }
        end

        flex.with_column(ml: 1) do
          render(Primer::Beta::Button.new(
            tag: :a,
            scheme: :primary,
            href: OpenProject::Static::Links.links[:pricing][:href],
            target: "_blank",
            title: t("admin.enterprise.buttons.upgrade"),
            aria_label: t("admin.enterprise.buttons.upgrade"),
            )) do |link|
            link.with_leading_visual_icon(icon: :"op-enterprise-addons")
            t("admin.enterprise.buttons.upgrade")
          end
        end

        flex.with_column(ml: 1) do
          angular_component_tag("opce-free-trial-button")
        end
      end
    %>
</div>
