<% html_title t(:label_administration), t("custom_actions.plural") -%>

<%=
  render Primer::OpenProject::PageHeader.new do |header|
    header.with_title { t("custom_actions.plural") }
    header.with_breadcrumbs(
      [{ href: admin_index_path, text: t("label_administration") },
       { href: admin_settings_work_packages_general_path, text: t(:label_work_package_plural) },
       t("custom_actions.plural")]
    )
  end
%>

<%= with_enterprise_banner_guard(:custom_actions, variant: :large, video: "enterprise/custom-actions.mp4") do %>
  <%=
    render(Primer::OpenProject::SubHeader.new) do |subheader|
      subheader.with_action_button(
        scheme: :primary,
        leading_icon: :plus,
        label: t("custom_actions.new"),
        test_selector: "op-admin-custom-actions--button-new",
        tag: :a,
        disabled: !EnterpriseToken.allows_to?(:custom_actions),
        href: new_custom_action_path
      ) do
        CustomAction.model_name.human
      end
    end
  %>
  <%= render(::CustomActions::TableComponent.new(rows: @custom_actions)) %>
<% end %>
