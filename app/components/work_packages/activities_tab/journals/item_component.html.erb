<%=
  component_wrapper(class: "work-packages-activities-tab-journals-item-component") do
    flex_layout(
      data: {
        test_selector: "op-wp-journal-entry-#{journal.id}"
      }
    ) do |journal_container|
      if show_comment_container?
        journal_container.with_row do
          render(
            WorkPackages::ActivitiesTab::Journals::ItemComponent::NoteComment.new(
              journal:,
              filter:,
              grouped_emoji_reactions:,
              state:
            )
          )
        end
      end
      comment_details.each do |detail|
        journal_container.with_row do
          render(
            WorkPackages::ActivitiesTab::Journals::ItemComponent::CommentView.new(
              comment: comment_for(detail),
              has_unread_notifications: has_unread_notifications?,
              filter:,
              state:
            )
          )
        end
      end
      journal_container.with_row do
        render(
          WorkPackages::ActivitiesTab::Journals::ItemComponent::Details.new(
            journal:,
            has_unread_notifications: notification_on_details?, filter:
          )
        )
      end
    end
  end
%>
