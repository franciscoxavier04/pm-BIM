<%=
  component_wrapper do
    primer_form_with(
      scope: :enterprise_token,
      model: @token,
      method: :post,
      url: enterprise_tokens_path,
      html: {
        id: "enterprise-token-form"
      }
    ) do |f|
      flex_layout(mb: 3) do |modal_body|
        errors_outside_fields = @token.errors.reject { |error| error.attribute == :encoded_token }
        if errors_outside_fields.any?
          modal_body.with_row do
            render(Primer::Alpha::Banner.new(mb: 3, icon: :stop, scheme: :danger)) do
              errors_outside_fields.map(&:full_message).join("\n")
            end
          end
        end

        modal_body.with_row(mb: 3) do
          render(EnterpriseTokens::TokenForm.new(f))
        end
      end
    end
  end
%>
