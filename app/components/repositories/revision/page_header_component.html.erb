<%= render Primer::OpenProject::PageHeader.new do |header| %>
  <% header.with_title do %>
    <%= "#{t(:label_revision)} #{helpers.format_revision(@changeset)}" %>
  <% end %>

  <% header.with_breadcrumbs([{
                                href: project_overview_path(@project.id),
                                text: @project.name
                              },
                              {
                                href: url_for({ action: "show", project_id: @project.id }),
                                text: t(
                                  "repositories.named_repository",
                                  vendor_name: @repository.class.vendor_name
                                )
                              },
                              {
                                href: revisions_project_repository_path(@project),
                                text: t(:label_revision_plural)
                              },
                              "#{t(:label_revision)} #{helpers.format_revision(@changeset)}"
                             ]) %>

  <%# Previous Revision Button %>
  <% if @changeset.previous.present? %>
    <% header.with_action_button(
      tag: :a,
      icon: "arrow-left",
      label: t(:label_previous),
      mobile_icon: "arrow-left",
      mobile_label: t(:label_previous),
      href: url_for(controller: "/repositories", action: "revision", project_id: @project, rev: @changeset.previous.identifier),
      title: t(:label_revision_id, value: helpers.format_revision(@changeset.previous)),
      aria: { label: t(:label_previous) }
    ) do |button|
      button.with_leading_visual_icon(icon: "arrow-left")
      t(:label_previous)
    end %>
  <% else %>
    <% header.with_action_button(
      tag: :button,
      icon: "arrow-left",
      label: t(:label_previous),
      mobile_icon: "arrow-left",
      mobile_label: t(:label_previous),
      disabled: true,
      title: t(:label_previous),
      aria: { label: t(:label_previous) }
    ) do |button|
      button.with_leading_visual_icon(icon: "arrow-left")
      t(:label_previous)
    end %>
  <% end %>

  <%# Next Revision Button %>
  <% if @changeset.next.present? %>
    <% header.with_action_button(
      tag: :a,
      icon: "arrow-right",
      label: t(:label_next),
      mobile_icon: "arrow-right",
      mobile_label: t(:label_next),
      href: url_for(controller: "/repositories", action: "revision", project_id: @project, rev: @changeset.next.identifier),
      title: t(:label_revision_id, value: helpers.format_revision(@changeset.next)),
      aria: { label: t(:label_next) }
    ) do |button|
      button.with_leading_visual_icon(icon: "arrow-right")
      t(:label_next)
    end %>
  <% else %>
    <% header.with_action_button(
      tag: :button,
      mobile_icon: "arrow-right",
      mobile_label: t(:label_next),
      disabled: true,
      title: t(:label_next),
      aria: { label: t(:label_next) }
    ) do |button|
      button.with_leading_visual_icon(icon: "arrow-right")
      t(:label_next)
    end %>
  <% end %>

  <%# Revision Search Form Button (if needed) could go here too) %>
<% end %>
